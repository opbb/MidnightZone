[gd_scene load_steps=14 format=2]

[ext_resource path="res://art_assets/sprites/enemyFlyingAlt_1.png" type="Texture" id=1]
[ext_resource path="res://art_assets/sprites/enemyFlyingAlt_2.png" type="Texture" id=2]
[ext_resource path="res://art_assets/sprites/enemySwimming_1.png" type="Texture" id=3]
[ext_resource path="res://Mob.gd" type="Script" id=4]
[ext_resource path="res://art_assets/sprites/enemyWalking_1.png" type="Texture" id=5]
[ext_resource path="res://art_assets/sprites/enemyWalking_2.png" type="Texture" id=6]
[ext_resource path="res://art_assets/sprites/enemySwimming_2.png" type="Texture" id=7]

[sub_resource type="GDScript" id=4]
script/source = "extends Node

export(PackedScene) var mob_scene


var listOfMobs = []


# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.

func start_mob_timer():
	$MobTimer.start()

func stop_mob_timer():
	$MobTimer.stop()
	
func _on_MobTimer_timeout():
	# Create a new instance of the Mob scene.
	var mob = mob_scene.instance()
	listOfMobs.append(mob)

	# Get location of light
	var light_location = get_node(\"../Light\")
	
	# Choose a random location on Path2D.
	var mob_spawn_location = get_node(\"MobPath/MobSpawnLocation\")
	mob_spawn_location.offset = randi()
	var will_rotate = randi() % 2 == 0
	mob.set_Properties(mob_spawn_location, light_location, will_rotate)

	# Spawn the mob by adding it to the Main scene.
	add_child(mob)
"

[sub_resource type="SpriteFrames" id=1]
animations = [ {
"frames": [ ExtResource( 1 ), ExtResource( 2 ) ],
"loop": true,
"name": "flying",
"speed": 3.0
}, {
"frames": [ ExtResource( 3 ), ExtResource( 7 ) ],
"loop": true,
"name": "swim",
"speed": 3.0
}, {
"frames": [ ExtResource( 5 ), ExtResource( 6 ) ],
"loop": true,
"name": "walk",
"speed": 3.0
} ]

[sub_resource type="CapsuleShape2D" id=2]
radius = 51.0
height = 0.0

[sub_resource type="CircleShape2D" id=3]

[sub_resource type="PackedScene" id=5]
_bundled = {
"conn_count": 4,
"conns": PoolIntArray( 1073741835, 1073741834, 47, 46, 2, 0, 1073741837, 1073741836, 49, 48, 2, 0, 1073741839, 1073741838, 51, 50, 2, 0, 1073741841, 1073741840, 53, 52, 2, 0 ),
"editable_instances": [  ],
"names": PoolStringArray( "Mob", "Area2D", "collision_layer", "collision_mask", "script", "__meta__", "AnimatedSprite", "AnimatedSprite", "scale", "frames", "animation", "playing", "CollisionShape2D", "CollisionShape2D", "rotation", "shape", "VisibilityNotifier2D", "VisibilityNotifier2D", "LightCheckArea2D", "Area2D", "collision_layer", "collision_mask", "CollisionShape2D", "CollisionShape2D", "shape", "PlayerRayCast2D", "RayCast2D", "cast_to", "collision_mask", "collide_with_areas", "collide_with_bodies", "TerrainRayCast2D", "RayCast2D", "cast_to", "collision_mask", "collide_with_areas", "ShadowCheckTimer", "Timer", "wait_time", "autostart", "ConsumedTimer", "Timer", "one_shot", "BounceTimer", "Timer", "one_shot", "_on_Mob_body_entered", "body_entered", "_on_VisibilityNotifier2D_screen_exited", "screen_exited", "_on_ShadowCheckTimer_timeout", "timeout", "_on_ConsumedTimer_timeout", "timeout" ),
"node_count": 11,
"node_paths": [ NodePath("."), NodePath("."), NodePath("."), NodePath("."), NodePath("./LightCheckArea2D"), NodePath("."), NodePath("."), NodePath("."), NodePath("."), NodePath("."), NodePath("."), NodePath("."), NodePath("."), NodePath("VisibilityNotifier2D"), NodePath("."), NodePath("ShadowCheckTimer"), NodePath("."), NodePath("ConsumedTimer") ],
"nodes": PoolIntArray( -1, -1, 1, 0, -1, 4, 2, 0, 3, 1, 4, 2, 5, 3, 0, 1073741824, 0, 7, 6, -1, 4, 8, 4, 9, 5, 10, 6, 11, 7, 0, 1073741825, 0, 13, 12, -1, 2, 14, 8, 15, 9, 0, 1073741826, 0, 17, 16, -1, 0, 0, 1073741827, 0, 19, 18, -1, 2, 20, 10, 21, 11, 0, 1073741828, 0, 23, 22, -1, 1, 24, 12, 0, 1073741829, 0, 26, 25, -1, 4, 27, 13, 28, 14, 29, 15, 30, 16, 0, 1073741830, 0, 32, 31, -1, 3, 33, 17, 34, 18, 35, 19, 0, 1073741831, 0, 37, 36, -1, 2, 38, 20, 39, 21, 0, 1073741832, 0, 41, 40, -1, 1, 42, 22, 0, 1073741833, 0, 44, 43, -1, 1, 45, 23, 0 ),
"variants": [ 257, 640, ExtResource( 4 ), {
"_edit_group_": true
}, Vector2( 0.75, 0.75 ), SubResource( 1 ), "walk", true, 1.5708, SubResource( 2 ), 0, 512, SubResource( 3 ), Vector2( 0, 0 ), 128, true, false, Vector2( 0, 0 ), 64, true, 0.1, true, true, true ],
"version": 2
}

[sub_resource type="Curve2D" id=6]
_data = {
"points": PoolVector2Array( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 832, 0, 0, 0, 0, 0, 832, 832, 0, 0, 0, 0, 0, 832, 0, 0, 0, 0, 0, 0 )
}

[node name="MobSpawner" type="Node"]
script = SubResource( 4 )
mob_scene = SubResource( 5 )

[node name="MobPath" type="Path2D" parent="."]
curve = SubResource( 6 )

[node name="MobSpawnLocation" type="PathFollow2D" parent="MobPath"]

[node name="MobTimer" type="Timer" parent="."]
wait_time = 2.0

[connection signal="timeout" from="MobTimer" to="." method="_on_MobTimer_timeout"]
